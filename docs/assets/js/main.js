"use strict";console.log("hola");const listCharacteres=document.querySelector(".js-section-list"),btnSearch=document.querySelector(".js-btn"),input=document.querySelector(".js-input"),listFav=document.querySelector(".js-fav-list");let characteres=[],favouriteCharacteres=[];fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{characteres=e,paintcharacteres(characteres)});let savedFavourites=JSON.parse(localStorage.getItem("favoroutecharacteres"));function paintcharacteres(e){for(const t of e){const e=document.createElement("li"),a=document.createElement("article");e.setAttribute("class","article"),e.setAttribute("class","js-li"),e.setAttribute("id",t.char_id);const r=document.createElement("img");r.setAttribute("src",t.img),r.setAttribute("class","img"),r.setAttribute("alt","characteres Breakin Bad"),a.appendChild(r);const c=document.createElement("h2"),n=document.createTextNode(t.name);c.appendChild(n),a.appendChild(c);const s=document.createElement("p"),i=document.createTextNode(t.status);s.appendChild(i),a.appendChild(s),e.appendChild(a),listCharacteres.appendChild(e)}addEventListenerFavs()}function paintcharacteresfav(e){listFav.innerHTML="";for(const t of e){const e=document.createElement("li"),a=document.createElement("article");e.setAttribute("class","article"),e.setAttribute("class","js-li"),e.setAttribute("id",t.char_id);const r=document.createElement("img");r.setAttribute("src",t.img),r.setAttribute("class","img"),r.setAttribute("alt","characteres Breakin Bad"),a.appendChild(r);const c=document.createElement("h2"),n=document.createTextNode(t.name);c.appendChild(n),a.appendChild(c);const s=document.createElement("p"),i=document.createTextNode(t.status);s.appendChild(i),a.appendChild(s),e.appendChild(a),listFav.appendChild(e)}}function resultApi(){let e=[];listCharacteres.innerHTML="",fetch("https://breakingbadapi.com/api/characters?name="+input.value).then(e=>e.json()).then(t=>{e=t,paintcharacteres(e)})}function handleSearch(e){e.preventDefault(),resultApi()}function handleClickFav(e){e.currentTarget.classList.toggle("selected");const t=characteres.find(t=>t.char_id===parseInt(e.currentTarget.id)),a=favouriteCharacteres.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===a?(favouriteCharacteres.push(t),localStorage.setItem("favoroutecharacteres",JSON.stringify(favouriteCharacteres))):(favouriteCharacteres.splice(a,1),localStorage.setItem("favoroutecharacteres",JSON.stringify(favouriteCharacteres))),paintcharacteresfav(favouriteCharacteres)}function addEventListenerFavs(){const e=document.querySelectorAll(".js-li");for(const t of e)t.addEventListener("click",handleClickFav)}null!==savedFavourites&&(favouriteCharacteres=savedFavourites,paintcharacteresfav(favouriteCharacteres)),btnSearch.addEventListener("click",handleSearch);